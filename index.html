<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Birthday Surprise ‚Äî From S. Abdul Hameed</title>

<!-- ====== STYLES ====== -->
<style>
:root {
  --bg1: #ffd8e8;
  --bg2: #ffe6f2;
  --accent: #ff7aa2;
  --gold: #f6c86b;
  --soft: #ffffffcc;
  --text: #592a3c;
  --maxWidth: 960px;
}

/* ====== RESET ====== */
*{box-sizing:border-box;margin:0;padding:0;}
html,body{
  height:100%;
  font-family:'Poppins',sans-serif;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  color:var(--text);
  scroll-behavior:smooth;
  overflow-x:hidden;
}

/* ====== WRAPPER ====== */
.app{
  display:flex;flex-direction:column;align-items:center;justify-content:flex-start;
  width:100%;max-width:var(--maxWidth);
  min-height:85vh;margin:20px auto;padding-bottom:40px;
  background:linear-gradient(180deg,#fffdfd,#fff9fb);
  border-radius:20px;box-shadow:0 18px 60px rgba(0,0,0,0.15);
  overflow:hidden;position:relative;
}

/* ====== TOP BAR ====== */
.topbar{
  width:100%;padding:18px 26px;
  display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;
  background:rgba(255,255,255,0.45);
  border-bottom:1px solid rgba(255,255,255,0.25);
  backdrop-filter:blur(8px);
}
.brand{display:flex;align-items:center;gap:14px;}
.logo{
  width:64px;height:64px;border-radius:14px;
  background:linear-gradient(135deg,var(--accent),var(--gold));
  color:#fff;font-family:"Dancing Script",cursive;
  font-size:26px;font-weight:700;
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 8px 25px rgba(255,122,162,0.3);
  animation:pulseLogo 3s ease-in-out infinite alternate;
}
@keyframes pulseLogo{from{transform:scale(1)}to{transform:scale(1.08)}}
.brand h1{font-size:22px;color:var(--text);}
.brand p{font-size:12px;color:#7a4a56;opacity:.8;}
.topbar .small{font-size:13px;color:#6b3b45;opacity:.7;}

/* ====== BUTTONS ====== */
.btn{
  background:linear-gradient(90deg,var(--accent),var(--gold));
  border:none;color:#fff;border-radius:40px;
  padding:12px 26px;font-size:16px;font-weight:600;
  box-shadow:0 8px 20px rgba(255,122,162,0.3);
  cursor:pointer;transition:.3s all ease;
}
.btn:hover{transform:scale(1.05);box-shadow:0 10px 30px rgba(246,200,107,0.3);}
.mutebtn{border:none;background:none;color:var(--accent);font-weight:600;cursor:pointer;}

/* ====== PAGES ====== */
.stage{width:100%;padding:40px 20px;text-align:center;animation:fadeIn .8s ease;}
.page{display:none;opacity:0;transform:translateY(30px);transition:.7s all ease;}
.page.active{display:block;opacity:1;transform:translateY(0);}

/* ====== TEXT STYLES ====== */
.title{
  font-family:"Dancing Script",cursive;
  font-size:42px;margin-bottom:10px;color:#6a2340;text-shadow:0 2px 10px #0001;
}
.lead{max-width:720px;margin:0 auto 30px;color:#6b3b45;font-size:17px;line-height:1.6;}

/* ====== FORM ====== */
.form{
  background:rgba(255,255,255,0.75);border-radius:14px;
  padding:25px 20px;box-shadow:0 6px 20px rgba(0,0,0,0.06);
  display:flex;flex-wrap:wrap;gap:14px;justify-content:center;
  max-width:650px;margin:auto;animation:fadeInUp .8s ease;
}
.form input{
  width:100%;padding:12px 14px;border:1px solid #ffd1dc;
  border-radius:10px;font-size:15px;outline:none;
}
.fileLabel{
  display:inline-block;background:#fff0f6;border:2px dashed #ffb6c1;
  border-radius:10px;padding:10px 14px;font-size:14px;cursor:pointer;
  transition:.3s;background-clip:padding-box;
}
.fileLabel:hover{background:#ffe6ef;}
.smallNote{font-size:12px;color:#7a5461;margin-top:10px;}

/* ====== MYSTERY ====== */
.boxWrap{display:flex;flex-direction:column;align-items:center;gap:20px;}
.mystery{
  width:160px;height:160px;border-radius:20px;
  background:linear-gradient(180deg,var(--accent),#ff4b85);
  display:flex;align-items:center;justify-content:center;
  font-size:50px;color:#fff;cursor:pointer;
  animation:bob 3s ease-in-out infinite,fadeInUp 1.4s ease;
  box-shadow:0 10px 30px rgba(255,86,150,0.3);
}
@keyframes bob{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
.cake{
  font-size:100px;opacity:0;transform:translateY(20px)scale(.95);
  transition:.6s all ease;text-shadow:0 6px 15px rgba(0,0,0,0.1);
}
.cake.show{opacity:1;transform:translateY(0)scale(1);}
.cardPopup{
  background:linear-gradient(180deg,#fff,#fff6f8);
  padding:22px 26px;border-radius:14px;box-shadow:0 12px 40px rgba(0,0,0,0.08);
  max-width:520px;text-align:center;opacity:0;transform:translateY(40px)scale(.9);
  transition:.6s cubic-bezier(.2,.9,.3,1.2);
}
.cardPopup.show{opacity:1;transform:translateY(0)scale(1);}
.cardPopup h3{font-family:"Dancing Script",cursive;font-size:28px;color:#6b2b44;}
.cardPopup p{font-size:15px;color:#6b3b45;line-height:1.4;margin:10px 0;}

/* ====== WISHES CARD ====== */
.card2-content{
  background:linear-gradient(180deg,#fff7fa,#fff0f5);
  border-radius:18px;
  padding:30px 25px;
  box-shadow:0 12px 40px rgba(255,122,162,0.2);
  max-width:800px;margin:20px auto;
  position:relative;
  overflow:hidden;
  animation:fadeInUp 1s ease;
}
.card2-content::before{
  content:"";position:absolute;inset:0;border-radius:18px;
  background:linear-gradient(120deg,rgba(255,255,255,0) 30%,rgba(255,182,193,0.3) 50%,rgba(255,255,255,0) 70%);
  background-size:200% 200%;animation:shimmer 4s linear infinite;
}
@keyframes shimmer{0%{background-position:-100% 0}100%{background-position:200% 0}}
.card2-content h3{
  font-family:"Dancing Script",cursive;
  color:#6b2340;
  font-size:34px;
  margin-bottom:10px;
}
.card2-content h2{
  font-family:"Poppins",sans-serif;
  color:#6b3b45;
  font-size:18px;
  line-height:1.7;
  white-space:pre-line;
  font-weight:500;
}

/* ====== CAROUSEL ====== */
.carouselWrap{
  width:100%;max-width:860px;height:400px;
  display:flex;justify-content:center;align-items:center;
  background:rgba(255,255,255,0.75);border-radius:16px;
  box-shadow:0 12px 30px rgba(0,0,0,0.08);overflow:hidden;
  margin:auto;animation:fadeInUp 1s ease;
}
.carousel{
  position:relative;width:300px;height:300px;
  transform-style:preserve-3d;animation:spin 20s linear infinite;
}
@keyframes spin{from{transform:rotateY(0)}to{transform:rotateY(-360deg)}}
.slot{
  position:absolute;left:50%;top:50%;
  width:150px;height:150px;margin-left:-75px;margin-top:-75px;
  border-radius:50%;overflow:hidden;
  box-shadow:0 8px 20px rgba(0,0,0,0.12);
  border:5px solid rgba(255,255,255,0.9);
  background:white;
}
.slot img{width:100%;height:100%;object-fit:cover;}

/* ====== FLOATING DECOR ====== */
.floating-deco{position:absolute;inset:0;pointer-events:none;overflow:hidden;}
.heart,.ribbon{
  position:absolute;opacity:0;animation:floatUp 9s linear infinite;
  filter:drop-shadow(0 6px 12px rgba(255,122,162,0.25));
}
@keyframes floatUp{
  0%{transform:translateY(100vh)scale(.6);opacity:0}
  20%,80%{opacity:1}
  100%{transform:translateY(-10vh)scale(1);opacity:0}
}

/* ====== ANIMATIONS ====== */
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes fadeInUp{0%{opacity:0;transform:translateY(30px)}100%{opacity:1;transform:translateY(0)}}

/* ====== RESPONSIVE ====== */
@media(max-width:768px){
  .title{font-size:34px;}
  .carouselWrap{height:300px;}
  .carousel{width:240px;height:240px;}
}
@media(max-width:480px){
  .title{font-size:26px;}
  .lead{font-size:14px;}
  .app{margin:10px;border-radius:14px;}
}
</style>
</head>

<body>
<div class="app">

  <!-- ====== TOP BAR ====== -->
  <div class="topbar">
    <div class="brand">
      <div class="logo">S.A</div>
      <div>
        <h1>Birthday Surprise</h1>
        <p>For your best friend ‚Äî made with love by S. Abdul Hameed</p>
      </div>
    </div>
    <div style="display:flex;align-items:center;gap:10px">
      <div class="small">Pink ‚Ä¢ Cinematic ‚Ä¢ 1-page</div>
      <button id="replayBtn" class="btn" style="display:none">Replay üé¨</button>
    </div>
  </div>

  <!-- ====== STAGES ====== -->
  <div class="stage">
    
    <!-- Welcome -->
    <section id="page-welcome" class="page active">
      <h2 class="title">Welcome to my surprise üíñ</h2>
      <p class="lead">Enter your friend‚Äôs details and unwrap a beautiful, animated birthday experience!</p>
      <button id="startBtn" class="btn">Start the Surprise ‚Üí</button>
    </section>

    <!-- Form -->
    <section id="page-form" class="page">
      <h2 class="title">Tell me about them üéÄ</h2>
      <p class="lead">Enter the recipient's name & age, and upload 3 photos (used only locally).</p>
      <form id="infoForm" class="form" onsubmit="return false;">
        <input id="inputName" type="text" placeholder="Recipient's name (e.g. Mehwish)" required>
        <input id="inputAge" type="number" min="1" placeholder="Age (e.g. 22)" required>
        <div style="display:flex;flex-wrap:wrap;justify-content:center;gap:10px;">
          <label class="fileLabel">Photo 1<input id="file1" type="file" accept="image/*" style="display:none"></label>
          <label class="fileLabel">Photo 2<input id="file2" type="file" accept="image/*" style="display:none"></label>
          <label class="fileLabel">Photo 3<input id="file3" type="file" accept="image/*" style="display:none"></label>
        </div>
        <button id="toMystery" class="btn">Continue to Surprise üéÅ</button>
      </form>
      <div class="smallNote">Tip: Clear, portrait photos look best!</div>
    </section>

    <!-- Mystery -->
    <section id="page-mystery" class="page">
      <div class="boxWrap">
        <div class="mystery" id="mysteryBox">üéÅ</div>
        <div class="cake" id="cake">üéÇ<span id="candle" style="font-size:18px;margin-left:-8px;">üïØÔ∏è</span></div>
        <div class="cardPopup" id="cardPopup">
          <h3 id="popupTitle">Happy Birthday!</h3>
          <p id="popupMsg">You're amazing ‚Äî wishing you love and joy today üíñ</p>
          <div style="margin-top:12px;display:flex;gap:10px;justify-content:center;">
            <button id="toCard" class="btn">Next ‚Äî Birthday Wish ‚ú®</button>
            <button id="closeCard" class="mutebtn">Close</button>
          </div>
        </div>
      </div>
      <div class="smallNote">(Tap the box to reveal your surprise and music üéµ)</div>
    </section>

    <!-- Birthday Wish Card -->
    <section id="page-card2" class="page">
      <div class="card2-content">
        <h3>To You!</h3>
        <h2>
          Happy birthday ü•≥üéÇü•≥ Chanda, the day you came into my life I was not really much attached to
          you, but day by day you became close to my heart. And now you are truly my younger sister.
          I wish I could remove some of the pain from your life which you are bearing alone.
          But you're always welcome ü§ó ‚Äî you can talk anytime you want, especially about those things you
          can‚Äôt say to others.  
          I hope this year all your dreams come true. I wish that your
          brother could wish you ‚Äî but if he couldn‚Äôt, on his behalf I am wishing you a Happy Birthday üéàüéÇüéà Sana.  
          Don‚Äôt be sad, okay? Be happy üòå
        </h2>
      </div>
      <div style="margin-top:20px;">
        <button id="toCarousel" class="btn">Next ‚Üí Memories ‚ú®</button>
      </div>
    </section>

    <!-- Carousel -->
    <section id="page-carousel" class="page">
      <div class="carouselWrap">
        <div class="carousel" id="carousel"></div>
      </div>
      <div style="margin-top:12px;text-align:center">
        <h3 style="font-family:'Dancing Script',cursive;font-size:28px;color:#6b2340;margin:6px 0;">Best Wishes from Your Best Friend</h3>
        <p style="color:#6b3b45;font-weight:600;">‚Äî From S. Abdul Hameed üíñ</p>
      </div>
      <div style="margin-top:10px;">
        <button id="replayBtn2" class="btn">Replay üé¨</button>
        <button id="downloadBtn" class="mutebtn">Download Card (PNG)</button>
      </div>
    </section>
  </div>

  <div class="floating-deco" id="decor"></div>
  <audio id="bgAudio" preload="auto" src="https://cdn.pixabay.com/download/audio/2021/09/21/audio_0fcb7c0a5e.mp3?filename=happy-birthday-instrumental-110196.mp3"></audio>
</div>

<!-- ====== SCRIPT ====== -->
<script>
const $=id=>document.getElementById(id);
const pages={welcome:$('page-welcome'),form:$('page-form'),mystery:$('page-mystery'),card2:$('page-card2'),carousel:$('page-carousel')};
function showPage(name){Object.values(pages).forEach(p=>p.classList.remove('active'));pages[name].classList.add('active');$('replayBtn').style.display=(name==='carousel')?'inline-block':'none';}

showPage('welcome');
$('startBtn').onclick=()=>showPage('form');

/* ====== FORM LOGIC ====== */
const inName=$('inputName'),inAge=$('inputAge');
const f1=$('file1'),f2=$('file2'),f3=$('file3');
let photosData=[null,null,null];
function readFileToDataURL(file,idx){return new Promise((res,rej)=>{if(!file)return rej();const r=new FileReader();r.onload=()=>{photosData[idx]=r.result;res();};r.onerror=rej;r.readAsDataURL(file);});}
async function collectFormAndProceed(){
  const name=inName.value.trim(),age=inAge.value.trim(),files=[f1.files[0],f2.files[0],f3.files[0]];
  if(!name||!age||files.some(f=>!f))return alert('Please fill all fields and upload 3 photos.');
  await Promise.all(files.map((f,i)=>readFileToDataURL(f,i)));
  localStorage.setItem('bd_name',name);localStorage.setItem('bd_age',age);
  photosData.forEach((d,i)=>localStorage.setItem(`bd_photo${i+1}`,d));
  showPage('mystery');
}
$('toMystery').onclick=collectFormAndProceed;

/* ====== MYSTERY BOX ====== */
const audio=$('bgAudio'),box=$('mysteryBox'),cake=$('cake'),popup=$('cardPopup');
let boxOpened=false;
box.onclick=async()=>{
  if(boxOpened)return;boxOpened=true;
  try{await audio.play();}catch(e){}
  box.style.transition='.4s';box.style.transform='scale(.8)';box.style.opacity='0';
  setTimeout(()=>box.style.display='none',400);
  setTimeout(()=>{cake.classList.add('show');const candle=$('candle');let f=0;const fl=setInterval(()=>{f++;candle.style.opacity=(f%2===0)?1:.6;if(!cake.classList.contains('show'))clearInterval(fl)},300);},500);
  setTimeout(()=>{const name=localStorage.getItem('bd_name')||'Friend',age=localStorage.getItem('bd_age')||'';$('popupTitle').textContent=`üéâ Happy Birthday ${name}!`;$('popupMsg').innerHTML=`You're <strong>${age}</strong> now ‚Äî wishing you joy and success üíï`;popup.classList.add('show');createFloatingBatch(10);},1200);
};
$('closeCard').onclick=()=>popup.classList.remove('show');
$('toCard').onclick=()=>{showPage('card2');createFloatingBatch(12,true);};
$('toCarousel').onclick=()=>{showPage('carousel');buildCarousel();createFloatingBatch(12,true);};

/* ====== CAROUSEL ====== */
function buildCarousel(){
  const imgs=[1,2,3].map(i=>localStorage.getItem(`bd_photo${i}`)).filter(Boolean);
  const c=$('carousel');c.innerHTML='';const slots=imgs.length||3;
  const def=['https://picsum.photos/seed/1/400','https://picsum.photos/seed/2/400','https://picsum.photos/seed/3/400'];
  imgs.length?null:imgs.push(...def);
  for(let i=0;i<slots;i++){const angle=(360/slots)*i;const slot=document.createElement('div');slot.className='slot';slot.style.transform=`rotateY(${angle}deg) translateZ(360px) rotateY(-${angle}deg)`;const img=document.createElement('img');img.src=imgs[i];slot.appendChild(img);c.appendChild(slot);}
}

/* ====== DECORATIONS ====== */
const decor=$('decor');
function createFloatingBatch(count=8,strong=false){
  for(let i=0;i<count;i++){
    const el=document.createElement('div');
    const type=Math.random()>0.5?'heart':'ribbon';
    el.className=type;
    el.textContent=type==='heart'?['üíñ','‚ù§Ô∏è','üíï','üíû','üíì'][Math.floor(Math.random()*5)]:['üéÄ','‚ú®','üå∏','üéâ'][Math.floor(Math.random()*4)];
    el.style.left=`${5+Math.random()*90}%`;
    el.style.fontSize=`${14+Math.random()*28}px`;
    el.style.animationDuration=`${8+Math.random()*10*(strong?1.3:1)}s`;
    el.style.animationDelay=`${Math.random()*2}s`;
    el.style.transform=`translateY(${40+Math.random()*20}vh)`;
    decor.appendChild(el);
    setTimeout(()=>el.remove(),12000);
  }
}
setInterval(()=>createFloatingBatch(3),6000);

/* ====== REPLAY & DOWNLOAD ====== */
$('replayBtn').onclick=$('replayBtn2').onclick=resetExperience;
function resetExperience(){audio.pause();audio.currentTime=0;showPage('welcome');window.scrollTo({top:0,behavior:'smooth'});boxOpened=false;$('mysteryBox').style.display='flex';$('mysteryBox').style.opacity='1';cake.classList.remove('show');popup.classList.remove('show');}
$('downloadBtn').onclick=async()=>{const name=localStorage.getItem('bd_name')||'Friend',age=localStorage.getItem('bd_age')||'',photo=localStorage.getItem('bd_photo1');const cnv=document.createElement('canvas');cnv.width=1200;cnv.height=800;const ctx=cnv.getContext('2d');const g=ctx.createLinearGradient(0,0,cnv.width,cnv.height);g.addColorStop(0,'#ffd9e8');g.addColorStop(1,'#ffe6f2');ctx.fillStyle=g;ctx.fillRect(0,0,cnv.width,cnv.height);ctx.fillStyle='rgba(255,255,255,0.9)';const R=24;ctx.beginPath();ctx.moveTo(120+R,80);ctx.lineTo(1080-R,80);ctx.quadraticCurveTo(1080,80,1080,80+R);ctx.lineTo(1080,720-R);ctx.quadraticCurveTo(1080,720,1080-R,720);ctx.lineTo(120+R,720);ctx.quadraticCurveTo(120,720,120,720-R);ctx.lineTo(120,80+R);ctx.quadraticCurveTo(120,80,120+R,80);ctx.closePath();ctx.fill();const drawText=()=>{ctx.fillStyle='#6b2340';ctx.textAlign='center';ctx.font='bold 50px "Dancing Script",cursive';ctx.fillText(`Happy Birthday ${name}!`,cnv.width/2,520);ctx.font='28px Poppins';ctx.fillText(`You're ${age} now ‚Äî Best wishes from S. Abdul Hameed üíñ`,cnv.width/2,570);const link=document.createElement('a');link.download=`birthday-${name.replace(/\s+/g,'')}.png`;link.href=cnv.toDataURL('image/png');link.click();};if(photo){const img=new Image();img.onload=()=>{ctx.drawImage(img,cnv.width/2-160,150,320,320);drawText();};img.src=photo;}else drawText();};

/* ====== FORM ENTER KEY ====== */
$('infoForm').addEventListener('keydown',e=>{if(e.key==='Enter'){e.preventDefault();collectFormAndProceed();}});

/* ====== PREFILL ====== */
window.addEventListener('load',()=>{const n=localStorage.getItem('bd_name'),a=localStorage.getItem('bd_age');if(n)inName.value=n;if(a)inAge.value=a;});
</script>
</body>
</html>
